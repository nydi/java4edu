SET CLUSTER '';
SET DEFAULT_TABLE_TYPE 0;      
SET WRITE_DELAY 500;           
SET DEFAULT_LOCK_TIMEOUT 2000; 
SET CACHE_SIZE 16384;          

CREATE USER IF NOT EXISTS SA SALT 'cbe033376f175b8e' HASH '92bd7e4a945e988ca56faa51f50a8221f669eb78b817d981ddad3f8238b95603' ADMIN;            
CREATE SCHEMA IF NOT EXISTS DBBASIC AUTHORIZATION SA;           

DROP TABLE IF EXISTS DBBASIC.PERSON;     

DROP SEQUENCE IF EXISTS PUBLIC.S_PERSON;       
CREATE SEQUENCE PUBLIC.S_PERSON START WITH 1;  

DROP SEQUENCE IF EXISTS PUBLIC.S_MEMBER;       
CREATE SEQUENCE PUBLIC.S_MEMBER START WITH 100;

CREATE CACHED TABLE DBBASIC.PERSON(
    ID BIGINT NOT NULL,
    ACTIV BOOLEAN NOT NULL,
    BIRTHDAY DATE,
    FIRSTNAME VARCHAR(255) NOT NULL,
    LASTNAME VARCHAR(255) NOT NULL,
    LOCKVERSION BIGINT,
    MEMBERNR INTEGER NOT NULL
);    
ALTER TABLE DBBASIC.PERSON ADD CONSTRAINT DBBASIC.CONSTRAINT_8C PRIMARY KEY(ID); 
-- 1 +/- SELECT COUNT(*) FROM DBBASIC.PERSON;   
INSERT INTO DBBASIC.PERSON(ID, ACTIV, BIRTHDAY, FIRSTNAME, LASTNAME, LOCKVERSION, MEMBERNR) VALUES
(S_PERSON.NEXTVAL, TRUE, DATE '1985-09-11', 'Alfred', 'Sempacher', 0, S_MEMBER.NEXTVAL);  
INSERT INTO DBBASIC.PERSON(ID, ACTIV, BIRTHDAY, FIRSTNAME, LASTNAME, LOCKVERSION, MEMBERNR) VALUES
(S_PERSON.NEXTVAL, TRUE, DATE '1976-08-23', 'Holger', 'Grantarian', 0, S_MEMBER.NEXTVAL);

ALTER TABLE DBBASIC.PERSON ADD CONSTRAINT DBBASIC.CONSTRAINT_8C7 UNIQUE(MEMBERNR);               
ALTER TABLE DBBASIC.PERSON ADD CONSTRAINT DBBASIC.CONSTRAINT_8 UNIQUE(ID);       
